# File Structure:
.chalice folder contains config related and deployment related files
.gitignore contains file names that where ignored from being uploaded to github.
README.md is this file which will contain full description of the Assignment.
app.py contains code for the API's
requirements.txt contains modules that where installed for this system to work.

# Technology used
AWS Chalice Framework
AWS DynamoDB
uuid module
API Gateway

# System Design

1. URL in the form of https://xyz.com?query1=value1&query2=value2.....   ------------> given to /encodeurl API as a body parameter.
2. /encodeurl API assigns a token or key to the URL and stores the Token as a Primary key in hashedURL Table created in DynamoDB.
3. Other columns in the table are token URL (shortened Url which redirects to the main url when visited and counts a click when visited), actualURL-
- which contains the URL which was shortened.
4. To redirect to the main URL from shortened URL we have /decodeurl API. It takes token created in step 2 as a query parameter and redirects it to-
- the original URL.
5. To get info about the number of clicks for any shortened url we have created /getinfo API, which again takes in the token and gives us-
- the number of clicks along with information about the API.
5. Finally these API's are deployed using 'chalice deploy' command.

# API's
# API endpoint: https://4utnah6h34.execute-api.ap-south-1.amazonaws.com/api/
1. /encodeurl (POST)
Request Parameters: (body Params)
{
    "url":"https://offers.hubspot.com/monthly-marketing-reporting-template?hubs_signup-url=blog.hubspot.com%2Fmarketing%2Fwhat-are-utm-tracking-codes-ht&hubs_signup-cta=null&_ga=2.217709270.1317785789.1605507580-181949899.1605507580"
}

Response Parameters:
{
    "status": "success",
    "data_type": "object",
    "message": "successfully encoded",
    "data": {
        "token": "8ac39336-f7e1-476b-8b53-9321eb9ac545",
        "tokenURL": "https://4utnah6h34.execute-api.ap-south-1.amazonaws.com/api/decodeurl?token=8ac39336-f7e1-476b-8b53-9321eb9ac545",
        "actualURL": "https://offers.hubspot.com/monthly-marketing-reporting-template?hubs_signup-url=blog.hubspot.com%2Fmarketing%2Fwhat-are-utm-tracking-codes-ht&hubs_signup-cta=null&_ga=2.217709270.1317785789.1605507580-181949899.1605507580",
        "clicks": 0
    },
    "code": 200
}


2. /decodeurl (GET)
Request Parameters:(query params)
token=8ac39336-f7e1-476b-8b53-9321eb9ac545

Response Parameters:
Response for this API is the redirection to the original HTML page

Full API: https://4utnah6h34.execute-api.ap-south-1.amazonaws.com/api/decodeurl?token=8ac39336-f7e1-476b-8b53-9321eb9ac545

3. /getinfo (GET)
Request Parameters:(query params)
token=8ac39336-f7e1-476b-8b53-9321eb9ac545

Response Parameters:

{
    "status": "success",
    "data_type": "object",
    "message": "successfully fetched",
    "data": {
        "token": "8ac39336-f7e1-476b-8b53-9321eb9ac545",
        "clicks": 2.0,
        "tokenURL": "https://4utnah6h34.execute-api.ap-south-1.amazonaws.com/api/decodeurl?token=8ac39336-f7e1-476b-8b53-9321eb9ac545",
        "actualURL": "https://offers.hubspot.com/monthly-marketing-reporting-template?hubs_signup-url=blog.hubspot.com%2Fmarketing%2Fwhat-are-utm-tracking-codes-ht&hubs_signup-cta=null&_ga=2.217709270.1317785789.1605507580-181949899.1605507580"
    },
    "code": 200
}

Full API: https://4utnah6h34.execute-api.ap-south-1.amazonaws.com/api/getinfo?token=8ac39336-f7e1-476b-8b53-9321eb9ac545

# DynamoDB
TableName: hashedUrlTable
Column Names: token (PK), actualURL, tokenURL

# Conclusion
This sytem works just fine. But we can reduce the dependency on database by using encoding techniques which can be decoded also like JWT tokens but they tend to be very long than the unique identifiers generated by uuid library.





